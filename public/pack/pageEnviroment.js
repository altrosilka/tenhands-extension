!function(){function e(e){var t=document.createElement("img");return t.src=e,e=t.src,t.src=null,e}function t(){var e;return e=document.querySelector('meta[property="og:image"]'),null!==e?e.getAttribute("content"):(e=document.querySelector('link[rel="image_src"]'),null!==e?e.getAttribute("href"):(e=document.querySelector('meta[name="twitter:image"]'),null!==e?e.getAttribute("content"):e))}function n(e){var t;return t=document.querySelector(e),null!==t?t.innerHTML.replace(/(<([^>]+)>)/gi,"").replace(/(\n)+/g,"\n"):void 0}function i(){var e;return e=document.querySelector('meta[name="description"]'),null!==e?e.getAttribute("content"):(e=document.querySelector('meta[name="Description"]'),null!==e?e.getAttribute("content"):"")}function r(){a=document.getElementById("smm-transport-ekniERgebe39EWee"),null===a?setTimeout(r,100):setTimeout(function(){a.contentWindow.postMessage(m,"chrome-extension://"+chrome.runtime.id)},100)}var a;if(a=document.getElementById("smm-transport-ekniERgebe39EWee"),null===a){for(var l,o,d=document.getElementsByTagName("img"),s=[],c=0,u=d.length;u>c;c++)l=d.item(c),l.hidden||l.naturalHeight<100||l.naturalWidth<100||l.width<150||l.height<150||(o=l.width/l.height,o>4||.25>o||s.push({alt:l.alt,clientHeight:l.clientHeight,clientWidth:l.clientWidth,width:l.width,height:l.height,title:l.title,src:l.src,src_big:l.src,type:"image"}));var m={images:s,title:document.title,description:i(),url:document.location.href,imageSrc:e(t()),h1:n("h1"),h2:n("h2"),h3:n("h3")},g=window.getSelection();if(g&&"None"!==g.type){var h=g.getRangeAt(0);if(h){var p=document.createElement("div");p.appendChild(h.cloneContents()),m.selection=p.innerHTML}}r()}}(),function(e,t){function n(e){var n=e.message?"message":"data",i=e[n];if(i===o("close")&&(l(),setTimeout(function(){t.body.removeChild(m)},450)),i===o("toggle")){var r=m.getAttribute("data-small-view");null===r?(m.setAttribute("data-small-view","true"),m.style["-webkit-transform"]="translateY(50%)"):(m.removeAttribute("data-small-view"),m.style["-webkit-transform"]="translateY(0)")}}function i(e,n){var i=t.createElement("div");return i.innerHTML=n,i.setAttribute("style","background-color: #EEE; display: inline-block; margin: 0 5px; padding: 3px 6px; border: 1px solid #AAA; cursor: pointer;"),i.addEventListener("click",function(){}),i}function r(e,t){return{x:e.clientX>t.clientX?1:-1,y:e.clientY>t.clientY?1:-1}}function a(){m.style.display="block",setTimeout(function(){m.style.transform="translateY(0px)",m.style.opacity="1",m.style.visibility="visible"},0)}function l(){m.style.transform="translateY(100px)",m.style.opacity="0",m.style.visibility="hidden",window.removeEventListener(A,n),t.body.removeChild(t.getElementById(s+"additionalPadding")),setTimeout(function(){m.style.display="none"},400)}function o(e){return c+e}var d,s="smm-UEe9vE-",c="Ejiw9494WvweejgreWCEGHeeE_FF_",u="smm-layout-ekniERgebe39EWee",m=t.getElementById(u);if(null===m){m=t.createElement("div"),m.setAttribute("id",u),m.setAttribute("class",s+"layout"),m.setAttribute("style","");var g=t.createElement("div");g.setAttribute("style","height:"+window.innerHeight/2+"px"),g.setAttribute("id",s+"additionalPadding"),t.body.appendChild(g);var h=t.createElement("iframe");h.src=chrome.extension.getURL("pages/createPost.html"),h.setAttribute("style","width:100%;height:100%;z-index:1;position:relative;"),h.setAttribute("id","smm-transport-ekniERgebe39EWee"),h.setAttribute("frameborder","0"),m.appendChild(h),t.body.appendChild(m);var p=t.createElement("div");p.setAttribute("style","position:fixed; z-index: 99999999999898988899;margin:10px;");var v=i("addParagraph","Новый параграф"),y=i("addString","Новая строка"),b=i("addInstead","Вместо текста"),f=i("addTo","Добавить к тексту");p.appendChild(v),p.appendChild(y),p.appendChild(b),p.appendChild(f),m.appendChild(p),document.body.addEventListener("mousedown",function(e){d=e}),document.body.addEventListener("mouseup",function(e){var t=window.getSelection();if(t&&"None"!==t.type){var n=t.getRangeAt(0);if(n){var i=document.createElement("div");i.appendChild(n.cloneContents());var a=i.innerHTML;if(a&&""!==a){r(e,d),window.innerWidth,window.innerHeight}}}e.clientX===d.clientX&&e.clientY===d.clientY&&(p.style.left="-9999px")})}else"hidden"===e.getComputedStyle(m).visibility&&a();var E=window.addEventListener?"addEventListener":"attachEvent",w=window[E],A="attachEvent"==E?"onmessage":"message";w(A,n,!1)}(window,document);